
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application who can log in and access admin features.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "username": {
          "type": "string",
          "description": "The user's username for logging in."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "isAdmin": {
          "type": "boolean",
          "description": "Indicates whether the user has administrator privileges."
        }
      },
      "required": [
        "id",
        "email"
      ]
    },
    "GameLevel": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GameLevel",
      "type": "object",
      "description": "Represents a specific game level setting.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the GameLevel entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the game level (e.g., Easy, Normal, Hard)."
        },
        "gravity": {
          "type": "number",
          "description": "The gravity setting for the game level."
        },
        "lift": {
          "type": "number",
          "description": "The lift setting for the game level."
        },
        "gap": {
          "type": "number",
          "description": "The gap size between pipes for the game level."
        },
        "speed": {
          "type": "number",
          "description": "The game speed for the game level."
        },
        "spawnRate": {
          "type": "number",
          "description": "The pipe spawn rate for the game level."
        }
      },
      "required": [
        "id",
        "name",
        "gravity",
        "lift",
        "gap",
        "speed",
        "spawnRate"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's public profile.",
      "properties": {
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the user profile was created."
        },
        "highScore": {
            "type": "number",
            "description": "The user's highest score."
        },
        "xp": {
          "type": "number",
          "description": "The user's experience points."
        },
        "level": {
          "type": "number",
          "description": "The user's current level."
        },
        "avatarUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the user's avatar image."
        },
        "achievements": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "An array of achievement IDs the user has earned."
        }
      },
      "required": [
        "displayName",
        "email"
      ]
    },
    "Activity": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Activity",
      "type": "object",
      "description": "Represents a single activity or event performed by a user.",
      "properties": {
        "description": {
          "type": "string",
          "description": "A description of the activity."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "The time when the activity occurred."
        }
      },
      "required": [
        "description",
        "timestamp"
      ]
    },
    "Settings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Settings",
      "type": "object",
      "description": "Represents global application settings manageable by an admin.",
      "properties": {
        "maintenanceMode": {
          "type": "boolean",
          "description": "If true, the application is in maintenance mode."
        },
        "welcomeMessage": {
          "type": "string",
          "description": "A global welcome message for all users."
        }
      }
    },
    "GameAssets": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GameAssets",
      "type": "object",
      "description": "Stores URLs for custom game assets uploaded by an admin.",
      "properties": {
        "bg": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "url": {"type": "string", "format": "uri"}
          }
        },
        "pipes": {
          "type": "array",
          "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "url": {"type": "string", "format": "uri"},
                "collisionSoundUrl": {"type": "string", "format": "uri"}
              }
          }
        },
        "player": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "url": {"type": "string", "format": "uri"}
          }
        },
        "bgMusic": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "url": {"type": "string", "format": "uri"}
          }
        },
        "coin": {
            "type": "object",
            "properties": {
                "name": {"type": "string"},
                "url": {"type": "string", "format": "uri"}
            }
        },
        "shield": {
            "type": "object",
            "properties": {
                "name": {"type": "string"},
                "url": {"type": "string", "format": "uri"}
            }
        },
        "slowMo": {
            "type": "object",
            "properties": {
                "name": {"type": "string"},
                "url": {"type": "string", "format": "uri"}
            }
        },
        "doubleScore": {
            "type": "object",
            "properties": {
                "name": {"type": "string"},
                "url": {"type": "string", "format": "uri"}
            }
        },
        "jumpSound": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "url": {
              "type": "string",
              "format": "uri"
            }
          }
        },
        "collisionSound": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "url": {
              "type": "string",
              "format": "uri"
            }
          }
        },
        "coinSound": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "url": { "type": "string", "format": "uri" }
          }
        },
        "shieldSound": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "url": { "type": "string", "format": "uri" }
          }
        },
        "slowMoSound": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "url": { "type": "string", "format": "uri" }
          }
        },
        "doubleScoreSound": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "url": { "type": "string", "format": "uri" }
          }
        },
        "pipePassSound": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "url": { "type": "string", "format": "uri" }
          }
        }
      }
    },
    "GameEvent": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "GameEvent",
        "type": "object",
        "description": "Represents an analytics event from a game session.",
        "properties": {
            "userId": {
                "type": "string",
                "description": "The UID of the user who triggered the event."
            },
            "timestamp": {
                "type": "string",
                "format": "date-time",
                "description": "The time the event occurred."
            },
            "score": {
                "type": "number",
                "description": "The final score of the game."
            },
            "difficulty": {
                "type": "string",
                "description": "The difficulty level played."
            },
            "deviceType": {
                "type": "string",
                "enum": ["desktop", "mobile"],
                "description": "The type of device the game was played on."
            },
            "gamesPlayed": {
                "type": "number",
                "description": "Total number of games played by the user."
            }
        },
        "required": ["userId", "timestamp", "score", "difficulty"]
    },
    "LeaderboardEntry": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LeaderboardEntry",
      "type": "object",
      "description": "Represents a single entry on the leaderboard.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The UID of the user who achieved the score."
        },
        "displayName": {
          "type": "string",
          "description": "The display name of the user at the time of the score."
        },
        "score": {
          "type": "number",
          "description": "The score achieved by the user."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the score was recorded."
        },
        "difficulty": {
          "type": "string",
          "description": "The difficulty level played."
        }
      },
      "required": ["userId", "displayName", "score", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile data. 'userId' corresponds to Firebase Auth UID.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/activities/{activityId}",
        "definition": {
          "entityName": "Activity",
          "schema": {
            "$ref": "#/backend/entities/Activity"
          },
          "description": "Stores a log of activities for a specific user.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            },
            {
              "name": "activityId",
              "description": "The unique ID for the activity."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "roles_admin",
          "schema": {
            "type": "object",
            "properties": {
              "isAdmin": {
                "type": "boolean"
              }
            }
          },
          "description": "Indicates admin privileges for a user. Existence of a document with the user's ID grants admin access.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            }
          ]
        }
      },
      {
        "path": "/game_levels/{gameLevelId}",
        "definition": {
          "entityName": "GameLevel",
          "schema": {
            "$ref": "#/backend/entities/GameLevel"
          },
          "description": "Stores DRAFT game level configurations. These are not used in the live game.",
          "params": [
            {
              "name": "gameLevelId",
              "description": "Unique identifier for the game level."
            }
          ]
        }
      },
      {
        "path": "/published_game_levels/{gameLevelId}",
        "definition": {
          "entityName": "GameLevel",
          "schema": {
            "$ref": "#/backend/entities/GameLevel"
          },
          "description": "Stores PUBLISHED game level configurations that are used in the live game.",
          "params": [
            {
              "name": "gameLevelId",
              "description": "Unique identifier for the published game level."
            }
          ]
        }
      },
      {
        "path": "/settings/admin",
        "definition": {
          "entityName": "Settings",
          "schema": {
            "$ref": "#/backend/entities/Settings"
          },
          "description": "Singleton document to store global admin settings.",
          "params": []
        }
      },
      {
        "path": "/settings/game_assets",
        "definition": {
            "entityName": "GameAssets",
            "schema": {
                "$ref": "#/backend/entities/GameAssets"
            },
            "description": "Singleton document for storing URLs of custom uploaded game assets.",
            "params": []
        }
      },
      {
        "path": "/game_events/{eventId}",
        "definition": {
            "entityName": "GameEvent",
            "schema": {
                "$ref": "#/backend/entities/GameEvent"
            },
            "description": "Stores analytics events for game sessions.",
            "params": [
                {
                    "name": "eventId",
                    "description": "The unique ID for the game event."
                }
            ]
        }
      },
      {
        "path": "/leaderboard/{entryId}",
        "definition": {
          "entityName": "LeaderboardEntry",
          "schema": {
            "$ref": "#/backend/entities/LeaderboardEntry"
          },
          "description": "Stores a single leaderboard entry.",
          "params": [
            {
              "name": "entryId",
              "description": "The unique ID for the leaderboard entry."
            }
          ]
        }
      }
    ]
  }
}
