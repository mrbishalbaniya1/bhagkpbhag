{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application who can log in and access admin features.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "username": {
          "type": "string",
          "description": "The user's username for logging in."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "isAdmin": {
          "type": "boolean",
          "description": "Indicates whether the user has administrator privileges."
        }
      },
      "required": [
        "id",
        "email"
      ]
    },
    "GameLevel": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GameLevel",
      "type": "object",
      "description": "Represents a specific game level setting.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the GameLevel entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the game level (e.g., Easy, Normal, Hard)."
        },
        "gravity": {
          "type": "number",
          "description": "The gravity setting for the game level."
        },
        "lift": {
          "type": "number",
          "description": "The lift setting for the game level."
        },
        "gap": {
          "type": "number",
          "description": "The gap size between pipes for the game level."
        },
        "speed": {
          "type": "number",
          "description": "The game speed for the game level."
        },
        "spawnRate": {
          "type": "number",
          "description": "The pipe spawn rate for the game level."
        }
      },
      "required": [
        "id",
        "name",
        "gravity",
        "lift",
        "gap",
        "speed",
        "spawnRate"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's public profile.",
      "properties": {
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the user profile was created."
        }
      },
      "required": [
        "email"
      ]
    },
    "Activity": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Activity",
      "type": "object",
      "description": "Represents a single activity or event performed by a user.",
      "properties": {
        "description": {
          "type": "string",
          "description": "A description of the activity."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "The time when the activity occurred."
        }
      },
      "required": [
        "description",
        "timestamp"
      ]
    },
    "Settings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Settings",
      "type": "object",
      "description": "Represents global application settings manageable by an admin.",
      "properties": {
        "maintenanceMode": {
          "type": "boolean",
          "description": "If true, the application is in maintenance mode."
        },
        "welcomeMessage": {
          "type": "string",
          "description": "A global welcome message for all users."
        }
      }
    },
    "GameAssets": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GameAssets",
      "type": "object",
      "description": "Stores URLs for custom game assets uploaded by an admin.",
      "properties": {
        "bg": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "url": {"type": "string", "format": "uri"}
          }
        },
        "pipes": {
          "type": "array",
          "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "url": {"type": "string", "format": "uri"}
              }
          }
        },
        "player": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "url": {"type": "string", "format": "uri"}
          }
        },
        "bgMusic": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "url": {"type": "string", "format": "uri"}
          }
        }
      }
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile data. 'userId' corresponds to Firebase Auth UID.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/activities/{activityId}",
        "definition": {
          "entityName": "Activity",
          "schema": {
            "$ref": "#/backend/entities/Activity"
          },
          "description": "Stores a log of activities for a specific user.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            },
            {
              "name": "activityId",
              "description": "The unique ID for the activity."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "roles_admin",
          "schema": {
            "type": "object",
            "properties": {
              "isAdmin": {
                "type": "boolean"
              }
            }
          },
          "description": "Indicates admin privileges for a user. Existence of a document with the user's ID grants admin access.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Auth UID of the user."
            }
          ]
        }
      },
      {
        "path": "/game_levels/{gameLevelId}",
        "definition": {
          "entityName": "GameLevel",
          "schema": {
            "$ref": "#/backend/entities/GameLevel"
          },
          "description": "Stores game level configurations.",
          "params": [
            {
              "name": "gameLevelId",
              "description": "Unique identifier for the game level."
            }
          ]
        }
      },
      {
        "path": "/settings/admin",
        "definition": {
          "entityName": "Settings",
          "schema": {
            "$ref": "#/backend/entities/Settings"
          },
          "description": "Singleton document to store global admin settings.",
          "params": []
        }
      },
      {
        "path": "/settings/game_assets",
        "definition": {
            "entityName": "GameAssets",
            "schema": {
                "$ref": "#/backend/entities/GameAssets"
            },
            "description": "Singleton document for storing URLs of custom uploaded game assets.",
            "params": []
        }
      }
    ]
  }
}
